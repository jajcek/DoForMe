<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DoForMe!: LuaEngine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DoForMe!
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   <div id="projectbrief">Automation and planning work in a system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">LuaEngine Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Engine for maintaing LUA's API commands.  
 <a href="class_lua_engine.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lua__engine_8h_source.html">lua_engine.h</a>&gt;</code></p>

<p><a href="class_lua_engine-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a70152f6f27278ec4262bd4712823a72d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a70152f6f27278ec4262bd4712823a72d">MODE</a> { <a class="el" href="class_lua_engine.html#a70152f6f27278ec4262bd4712823a72da483618369ed68950688dd6fa572664b9">BUFFER</a> =  0, 
<a class="el" href="class_lua_engine.html#a70152f6f27278ec4262bd4712823a72daac87617557f4c3f7c559f1aed56a1645">FILE</a>
 }</td></tr>
<tr class="memdesc:a70152f6f27278ec4262bd4712823a72d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Values determining which mode we are using <a class="el" href="class_lua_engine.html#aab9337ae5ea59bccc1e08c4015d42700" title="Parses script (prepares for running it) into memory from a specified buffer.">loadScript()</a> function in.  <a href="class_lua_engine.html#a70152f6f27278ec4262bd4712823a72d">More...</a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a165d91bae4bef0670afd6f73a3e7e6a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a165d91bae4bef0670afd6f73a3e7e6a7">LuaEngine</a> ()</td></tr>
<tr class="memdesc:a165d91bae4bef0670afd6f73a3e7e6a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a lua engine, but doesn't load any script.  <a href="#a165d91bae4bef0670afd6f73a3e7e6a7"></a><br/></td></tr>
<tr class="memitem:ac72949ef59ee17465ce653f0c02c3eab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#ac72949ef59ee17465ce653f0c02c3eab">~LuaEngine</a> ()</td></tr>
<tr class="memdesc:ac72949ef59ee17465ce653f0c02c3eab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ends lua engine by releasing memory.  <a href="#ac72949ef59ee17465ce653f0c02c3eab"></a><br/></td></tr>
<tr class="memitem:a03530362918aceccd6f69a5cecf2a968"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a03530362918aceccd6f69a5cecf2a968">registerFunction</a> (const char *functionName, lua_CFunction pFunction)</td></tr>
<tr class="memdesc:a03530362918aceccd6f69a5cecf2a968"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers API function used in scripts.  <a href="#a03530362918aceccd6f69a5cecf2a968"></a><br/></td></tr>
<tr class="memitem:aab9337ae5ea59bccc1e08c4015d42700"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#aab9337ae5ea59bccc1e08c4015d42700">loadScript</a> (const char *code, int mode)</td></tr>
<tr class="memdesc:aab9337ae5ea59bccc1e08c4015d42700"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses script (prepares for running it) into memory from a specified buffer.  <a href="#aab9337ae5ea59bccc1e08c4015d42700"></a><br/></td></tr>
<tr class="memitem:a5eae05f78704166f098ea20568c23fd7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a5eae05f78704166f098ea20568c23fd7">parseScript</a> ()</td></tr>
<tr class="memdesc:a5eae05f78704166f098ea20568c23fd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts api functions onto stack - <a class="el" href="class_lua_engine.html#a86a3f32127e36e1ccce6c5a42a298ad5">LuaEngine::m_commands</a> - that has been previously loaded by <a class="el" href="class_lua_engine.html#aab9337ae5ea59bccc1e08c4015d42700" title="Parses script (prepares for running it) into memory from a specified buffer.">loadScript()</a>.  <a href="#a5eae05f78704166f098ea20568c23fd7"></a><br/></td></tr>
<tr class="memitem:ab039ca83afd2466f9fe52fcc69adfefb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#ab039ca83afd2466f9fe52fcc69adfefb">validateLastLoad</a> ()</td></tr>
<tr class="memdesc:ab039ca83afd2466f9fe52fcc69adfefb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if there was error in the last loaded file.  <a href="#ab039ca83afd2466f9fe52fcc69adfefb"></a><br/></td></tr>
<tr class="memitem:aed08b6b1d8b4a637bb3e24a397ea1aaf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#aed08b6b1d8b4a637bb3e24a397ea1aaf">validateLastParse</a> ()</td></tr>
<tr class="memdesc:aed08b6b1d8b4a637bb3e24a397ea1aaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if there was error in the last run file.  <a href="#aed08b6b1d8b4a637bb3e24a397ea1aaf"></a><br/></td></tr>
<tr class="memitem:af06d49221c25b93c334f9ed49571fa72"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#af06d49221c25b93c334f9ed49571fa72">getTextError</a> () const </td></tr>
<tr class="memdesc:af06d49221c25b93c334f9ed49571fa72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns error in a text form from last parsed (with <a class="el" href="class_lua_engine.html#a5eae05f78704166f098ea20568c23fd7" title="Puts api functions onto stack - LuaEngine::m_commands - that has been previously loaded by loadScript...">LuaEngine::parseScript()</a>) script.  <a href="#af06d49221c25b93c334f9ed49571fa72"></a><br/></td></tr>
<tr class="memitem:abeccc6545aa5cde1681cf61780044ab3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#abeccc6545aa5cde1681cf61780044ab3">addCommand</a> (void(*pCmd)(std::deque&lt; int &gt;))</td></tr>
<tr class="memitem:a1046fcf4498761e9c35165b99ca09987"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a1046fcf4498761e9c35165b99ca09987">addCommand</a> (void(*pCmd)(std::deque&lt; int &gt;), std::deque&lt; int &gt; args)</td></tr>
<tr class="memdesc:a1046fcf4498761e9c35165b99ca09987"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts actions onto stack. See <a class="el" href="class_lua_engine.html#a86a3f32127e36e1ccce6c5a42a298ad5">LuaEngine::m_commands</a> for more details.  <a href="#a1046fcf4498761e9c35165b99ca09987"></a><br/></td></tr>
<tr class="memitem:a1c299bc3d3f4a78f15f18b7458f76496"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a1c299bc3d3f4a78f15f18b7458f76496">timerEvent</a> (QTimerEvent *)</td></tr>
<tr class="memitem:a28e0795b54170d763a929256566fe2b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a28e0795b54170d763a929256566fe2b5">start</a> ()</td></tr>
<tr class="memitem:a6cf02a97dc88ba58276b4debfbd7b57a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a6cf02a97dc88ba58276b4debfbd7b57a">pause</a> ()</td></tr>
<tr class="memitem:a5822af655fb7b474766e39b44be56a6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a5822af655fb7b474766e39b44be56a6a">stop</a> ()</td></tr>
<tr class="memitem:a0b87a8b474070665af6e435a2c5bce56"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a0b87a8b474070665af6e435a2c5bce56">setInterval</a> (int interval)</td></tr>
<tr class="memitem:ac29f2b09b45797aac68bd5caa6fe2c90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#ac29f2b09b45797aac68bd5caa6fe2c90">setGUIInterval</a> (int interval)</td></tr>
<tr class="memitem:a613b53ffedc45c8cf800e99aa42408c5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a613b53ffedc45c8cf800e99aa42408c5">getGUIInterval</a> () const </td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a8f2ebf32095adde76c6f744ffb881b38"><td class="memItemLeft" align="right" valign="top">lua_State *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a8f2ebf32095adde76c6f744ffb881b38">luaState</a></td></tr>
<tr class="memdesc:a8f2ebf32095adde76c6f744ffb881b38"><td class="mdescLeft">&#160;</td><td class="mdescRight">State of the lua's engine. Used by lua's library - don't touch it.  <a href="#a8f2ebf32095adde76c6f744ffb881b38"></a><br/></td></tr>
<tr class="memitem:aaa0fb13e75482eb9ca360a1bee3b2f9f"><td class="memItemLeft" align="right" valign="top">QBasicTimer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#aaa0fb13e75482eb9ca360a1bee3b2f9f">m_timer</a></td></tr>
<tr class="memdesc:aaa0fb13e75482eb9ca360a1bee3b2f9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer is used for supporting commands execution in a latency.  <a href="#aaa0fb13e75482eb9ca360a1bee3b2f9f"></a><br/></td></tr>
<tr class="memitem:af25b4a96c17c157ae110afa1dd0866ec"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#af25b4a96c17c157ae110afa1dd0866ec">m_uInterval</a></td></tr>
<tr class="memdesc:af25b4a96c17c157ae110afa1dd0866ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores time (as milliseconds) needed to execute next command that is available in the queue <a class="el" href="class_lua_engine.html#a86a3f32127e36e1ccce6c5a42a298ad5">LuaEngine::m_commands</a>.  <a href="#af25b4a96c17c157ae110afa1dd0866ec"></a><br/></td></tr>
<tr class="memitem:ac7d00771a353cc9afa586a6ec10f5d90"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#ac7d00771a353cc9afa586a6ec10f5d90">m_uGUIInterval</a></td></tr>
<tr class="memdesc:ac7d00771a353cc9afa586a6ec10f5d90"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the same as <a class="el" href="class_lua_engine.html#af25b4a96c17c157ae110afa1dd0866ec" title="Stores time (as milliseconds) needed to execute next command that is available in the queue LuaEngine...">LuaEngine::m_uInterval</a>, but it stores value from "Commands time interval" in GUI.  <a href="#ac7d00771a353cc9afa586a6ec10f5d90"></a><br/></td></tr>
<tr class="memitem:a86a3f32127e36e1ccce6c5a42a298ad5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_commands_manager.html">CommandsManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a86a3f32127e36e1ccce6c5a42a298ad5">m_commands</a></td></tr>
<tr class="memitem:af8dca74620280060399b5b7dd937af44"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#af8dca74620280060399b5b7dd937af44">m_loadError</a></td></tr>
<tr class="memdesc:af8dca74620280060399b5b7dd937af44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates if there is a syntax/memory error in the loaded lua's script.  <a href="#af8dca74620280060399b5b7dd937af44"></a><br/></td></tr>
<tr class="memitem:ac7c65e343f73a0dadcbe2d5f1a5842f3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#ac7c65e343f73a0dadcbe2d5f1a5842f3">m_parseError</a></td></tr>
<tr class="memdesc:ac7c65e343f73a0dadcbe2d5f1a5842f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates if there is a runtime error in the loaded lua's script.  <a href="#ac7c65e343f73a0dadcbe2d5f1a5842f3"></a><br/></td></tr>
<tr class="memitem:a0cb5dc043a3f9b162ad97245cd7e6956"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#a0cb5dc043a3f9b162ad97245cd7e6956">m_textError</a></td></tr>
<tr class="memdesc:a0cb5dc043a3f9b162ad97245cd7e6956"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores exact string which is returned by lua's lua_pcall function.  <a href="#a0cb5dc043a3f9b162ad97245cd7e6956"></a><br/></td></tr>
<tr class="memitem:add74083d158ee3543d0644c0b6349c5d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lua_engine.html#add74083d158ee3543d0644c0b6349c5d">m_bIntervalChanged</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Engine for maintaing LUA's API commands. </p>
<p>Objects of this class load scripts, check their grammar correctness and store the commands for further executing. As first step after creating an object of this class you have to register your API functions by using <a class="el" href="class_lua_engine.html#a03530362918aceccd6f69a5cecf2a968" title="Registers API function used in scripts.">LuaEngine::registerFunction</a> method. When all of the functions has been registered you are allowed to load and parse scripts by using <a class="el" href="class_lua_engine.html#aab9337ae5ea59bccc1e08c4015d42700" title="Parses script (prepares for running it) into memory from a specified buffer.">LuaEngine::loadScript</a> and <a class="el" href="class_lua_engine.html#a5eae05f78704166f098ea20568c23fd7" title="Puts api functions onto stack - LuaEngine::m_commands - that has been previously loaded by loadScript...">LuaEngine::parseScript</a> methods. <a class="el" href="class_lua_engine.html#aab9337ae5ea59bccc1e08c4015d42700" title="Parses script (prepares for running it) into memory from a specified buffer.">LuaEngine::loadScript</a> simply loads code to the memory and check its correctness whereas <a class="el" href="class_lua_engine.html#a5eae05f78704166f098ea20568c23fd7" title="Puts api functions onto stack - LuaEngine::m_commands - that has been previously loaded by loadScript...">LuaEngine::parseScript</a> runs the script. During parsing LUA invokes methods which can prepare commands by putting them to a queue. This is done for allowing executing commands with some time interval (we can remove time interval - simply set GUI interval to 0). Check <a class="el" href="class_lua_engine.html#a03530362918aceccd6f69a5cecf2a968" title="Registers API function used in scripts.">LuaEngine::registerFunction</a> for more details. Next step (optional) is to set a time interval in which the commands will be executed (default is 500 milliseconds) by using <a class="el" href="class_lua_engine.html#ac29f2b09b45797aac68bd5caa6fe2c90">LuaEngine::setGUIInterval</a> method. After successful load and parse you need to copy queue and stack to the lua's engine by using LuaEngine::copyData. Last step is to invoke <a class="el" href="class_lua_engine.html#a28e0795b54170d763a929256566fe2b5">LuaEngine::start()</a> to start executing the commands. Also important thing to mention is <a class="el" href="class_lua_engine.html#a0b87a8b474070665af6e435a2c5bce56">LuaEngine::setInterval</a>. Comparing to the GUI version it changes time interval only for the next command. Therefore it should be used for some API functions like sleep(). </p>
<dl class="section author"><dt>Author:</dt><dd>Jacek Topolski </dd></dl>
<dl class="section version"><dt>Version:</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date:</dt><dd>28.06.2012 </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lua_engine_example_8cpp-example.html#_a0">luaEngine_example.cpp</a>.</dd>
</dl></div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a70152f6f27278ec4262bd4712823a72d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_lua_engine.html#a70152f6f27278ec4262bd4712823a72d">LuaEngine::MODE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Values determining which mode we are using <a class="el" href="class_lua_engine.html#aab9337ae5ea59bccc1e08c4015d42700" title="Parses script (prepares for running it) into memory from a specified buffer.">loadScript()</a> function in. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a70152f6f27278ec4262bd4712823a72da483618369ed68950688dd6fa572664b9"></a>BUFFER</em>&nbsp;</td><td>
<p>Value which indicates that the <a class="el" href="class_lua_engine.html#aab9337ae5ea59bccc1e08c4015d42700" title="Parses script (prepares for running it) into memory from a specified buffer.">loadScript()</a> function loads from a buffer. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a70152f6f27278ec4262bd4712823a72daac87617557f4c3f7c559f1aed56a1645"></a>FILE</em>&nbsp;</td><td>
<p>Value which indicates that the <a class="el" href="class_lua_engine.html#aab9337ae5ea59bccc1e08c4015d42700" title="Parses script (prepares for running it) into memory from a specified buffer.">loadScript()</a> function loads from a file. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a165d91bae4bef0670afd6f73a3e7e6a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LuaEngine::LuaEngine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a lua engine, but doesn't load any script. </p>
<p>Also initializes <a class="el" href="class_lua_engine.html#af8dca74620280060399b5b7dd937af44" title="Indicates if there is a syntax/memory error in the loaded lua&#39;s script.">LuaEngine::m_loadError</a> and LuaEngine::m_runtimeError to 0, m_uInterval to 500 and creates object for m_timer. m_textError is set to "". After that you have to register functions used in the LUA API and load a script by using <a class="el" href="class_lua_engine.html#aab9337ae5ea59bccc1e08c4015d42700" title="Parses script (prepares for running it) into memory from a specified buffer.">loadScript()</a> before run it with runScript(). </p>

</div>
</div>
<a class="anchor" id="ac72949ef59ee17465ce653f0c02c3eab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LuaEngine::~LuaEngine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ends lua engine by releasing memory. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="abeccc6545aa5cde1681cf61780044ab3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LuaEngine::addCommand </td>
          <td>(</td>
          <td class="paramtype">void(*)(std::deque&lt; int &gt;)&#160;</td>
          <td class="paramname"><em>pCmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1046fcf4498761e9c35165b99ca09987"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LuaEngine::addCommand </td>
          <td>(</td>
          <td class="paramtype">void(*)(std::deque&lt; int &gt;)&#160;</td>
          <td class="paramname"><em>pCmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::deque&lt; int &gt;&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts actions onto stack. See <a class="el" href="class_lua_engine.html#a86a3f32127e36e1ccce6c5a42a298ad5">LuaEngine::m_commands</a> for more details. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pCmd</td><td>Actions which will be put onto <a class="el" href="class_lua_engine.html#a86a3f32127e36e1ccce6c5a42a298ad5">LuaEngine::m_commands</a> stack. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">args</td><td>Arguments for api functions that will be put onto LuaEngine::m_args stack. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a613b53ffedc45c8cf800e99aa42408c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LuaEngine::getGUIInterval </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af06d49221c25b93c334f9ed49571fa72"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString LuaEngine::getTextError </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns error in a text form from last parsed (with <a class="el" href="class_lua_engine.html#a5eae05f78704166f098ea20568c23fd7" title="Puts api functions onto stack - LuaEngine::m_commands - that has been previously loaded by loadScript...">LuaEngine::parseScript()</a>) script. </p>
<p>In lua 5.1 the string has form like "[string "?"]:1: attempt to call global 'FunctionName' (a nil value)" </p>
<dl class="section return"><dt>Returns:</dt><dd>Error in a text form. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lua_engine_example_8cpp-example.html#a11">luaEngine_example.cpp</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="aab9337ae5ea59bccc1e08c4015d42700"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LuaEngine::loadScript </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses script (prepares for running it) into memory from a specified buffer. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>Script code or file name, depends on the second argument. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Indicates whether this function loads from file or from a buffer. See <a class="el" href="class_lua_engine.html#a70152f6f27278ec4262bd4712823a72d" title="Values determining which mode we are using loadScript() function in.">LuaEngine::MODE</a> for more details. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Error code or 0 if there are no errors. See luaEngine::m_loadError for more details. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lua_engine_example_8cpp-example.html#a8">luaEngine_example.cpp</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a5eae05f78704166f098ea20568c23fd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LuaEngine::parseScript </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts api functions onto stack - <a class="el" href="class_lua_engine.html#a86a3f32127e36e1ccce6c5a42a298ad5">LuaEngine::m_commands</a> - that has been previously loaded by <a class="el" href="class_lua_engine.html#aab9337ae5ea59bccc1e08c4015d42700" title="Parses script (prepares for running it) into memory from a specified buffer.">loadScript()</a>. </p>
<dl class="section return"><dt>Returns:</dt><dd>Error code or 0 if there are no errors. See luaEngine::m_parseError for more details. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lua_engine_example_8cpp-example.html#a10">luaEngine_example.cpp</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a6cf02a97dc88ba58276b4debfbd7b57a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LuaEngine::pause </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a03530362918aceccd6f69a5cecf2a968"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LuaEngine::registerFunction </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>functionName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lua_CFunction&#160;</td>
          <td class="paramname"><em>pFunction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers API function used in scripts. </p>
<p><b>lua_CFunction</b> is declared as <b>typedef int (*lua_CFunction) (lua_State *L);</b> </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">functionName</td><td>Name of the function that has to be available in the LUA API. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pFunction</td><td>Pointer to a function which will be called when the functionName() in the script is found. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lua_engine_example_8cpp-example.html#a1">luaEngine_example.cpp</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ac29f2b09b45797aac68bd5caa6fe2c90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LuaEngine::setGUIInterval </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>interval</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lua_engine_example_8cpp-example.html#a12">luaEngine_example.cpp</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a0b87a8b474070665af6e435a2c5bce56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LuaEngine::setInterval </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>interval</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a28e0795b54170d763a929256566fe2b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LuaEngine::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lua_engine_example_8cpp-example.html#a13">luaEngine_example.cpp</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a5822af655fb7b474766e39b44be56a6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LuaEngine::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1c299bc3d3f4a78f15f18b7458f76496"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LuaEngine::timerEvent </td>
          <td>(</td>
          <td class="paramtype">QTimerEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab039ca83afd2466f9fe52fcc69adfefb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LuaEngine::validateLastLoad </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if there was error in the last loaded file. </p>
<dl class="section return"><dt>Returns:</dt><dd>Error code. See luaEngine::m_loadError for more details. </dd></dl>

</div>
</div>
<a class="anchor" id="aed08b6b1d8b4a637bb3e24a397ea1aaf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LuaEngine::validateLastParse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if there was error in the last run file. </p>
<dl class="section return"><dt>Returns:</dt><dd>Error code. See luaEngine::m_parseError for more details. </dd></dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a8f2ebf32095adde76c6f744ffb881b38"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">lua_State * LuaEngine::luaState</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State of the lua's engine. Used by lua's library - don't touch it. </p>

</div>
</div>
<a class="anchor" id="add74083d158ee3543d0644c0b6349c5d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LuaEngine::m_bIntervalChanged</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a86a3f32127e36e1ccce6c5a42a298ad5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_commands_manager.html">CommandsManager</a> LuaEngine::m_commands</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af8dca74620280060399b5b7dd937af44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int LuaEngine::m_loadError</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicates if there is a syntax/memory error in the loaded lua's script. </p>
<p>If there is no errors the value is equal to 0, otherwise the value is a number of error code. </p>
<pre class="fragment">            Error code:
            3 - syntax error (defined as LUA_ERRSYNTAX in lua.h).
            4 - memory allocation error (defined as LUA_ERRMEM in lua.h).</pre> 
</div>
</div>
<a class="anchor" id="ac7c65e343f73a0dadcbe2d5f1a5842f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int LuaEngine::m_parseError</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicates if there is a runtime error in the loaded lua's script. </p>
<p>If there is no errors the value is equal to 0, otherwise the value is a number of error code. </p>
<pre class="fragment">            Error code:
            2 - a runtime error (defined as LUA_ERRRUN in lua.h).
            4 - memory allocation error (defined as LUA_ERRMEM in lua.h).
            5 - error while running the error handler function (defined as LUA_ERRERR in lua.h).</pre> 
</div>
</div>
<a class="anchor" id="a0cb5dc043a3f9b162ad97245cd7e6956"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString LuaEngine::m_textError</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stores exact string which is returned by lua's lua_pcall function. </p>
<p>In lua 5.1 the string has form like "[string "?"]:1: attempt to call global 'FunctionName' (a nil value)" </p>

</div>
</div>
<a class="anchor" id="aaa0fb13e75482eb9ca360a1bee3b2f9f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QBasicTimer * LuaEngine::m_timer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timer is used for supporting commands execution in a latency. </p>
<p>It is possible to execute commands every some time which is specified in <a class="el" href="class_lua_engine.html#af25b4a96c17c157ae110afa1dd0866ec" title="Stores time (as milliseconds) needed to execute next command that is available in the queue LuaEngine...">LuaEngine::m_uInterval</a> (as milliseconds). </p>

</div>
</div>
<a class="anchor" id="ac7d00771a353cc9afa586a6ec10f5d90"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned LuaEngine::m_uGUIInterval</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is the same as <a class="el" href="class_lua_engine.html#af25b4a96c17c157ae110afa1dd0866ec" title="Stores time (as milliseconds) needed to execute next command that is available in the queue LuaEngine...">LuaEngine::m_uInterval</a>, but it stores value from "Commands time interval" in GUI. </p>
<p>This shouldn't be changed while calling e.g API sleep() function. This value only depends on value set in the GUI. The value is assigned to m_uInterval if needed to come back from sleep() function used in script. </p>

</div>
</div>
<a class="anchor" id="af25b4a96c17c157ae110afa1dd0866ec"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned LuaEngine::m_uInterval</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stores time (as milliseconds) needed to execute next command that is available in the queue <a class="el" href="class_lua_engine.html#a86a3f32127e36e1ccce6c5a42a298ad5">LuaEngine::m_commands</a>. </p>
<p>This can be changed while calling e.g. sleep() in the script. This value is used in timer event, not the <a class="el" href="class_lua_engine.html#ac7d00771a353cc9afa586a6ec10f5d90" title="This is the same as LuaEngine::m_uInterval, but it stores value from &quot;Commands time interval&quot; in GUI...">LuaEngine::m_uGUIInterval</a>. Check <a class="el" href="class_lua_engine.html#ac7d00771a353cc9afa586a6ec10f5d90" title="This is the same as LuaEngine::m_uInterval, but it stores value from &quot;Commands time interval&quot; in GUI...">LuaEngine::m_uGUIInterval</a> for more details. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>DoForMe!/<a class="el" href="lua__engine_8h_source.html">lua_engine.h</a></li>
<li>DoForMe!/<a class="el" href="lua__engine_8cpp.html">lua_engine.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 17 2012 19:15:36 for DoForMe! by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
